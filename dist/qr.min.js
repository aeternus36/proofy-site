/*!
 * QRCode.js
 * https://github.com/davidshimjs/qrcodejs
 */
!function(o){function t(o){this.mode=s.MODE_8BIT_BYTE,this.data=o}function e(o,t){this.typeNumber=o,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function i(o,t){if(void 0==o.length)throw new Error(o.length+"/"+t);for(var e=0;e<o.length&&0==o[e];)e++;this.num=new Array(o.length-e+t);for(var i=0;i<o.length-e;i++)this.num[i]=o[i+e];for(var n=0;n<t;n++)this.num[o.length-e+n]=0}function n(o,t){this.totalCount=o,this.dataCount=t}function r(){this.buffer=[],this.length=0}function s(){return{MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8,ErrorCorrectLevel:{L:1,M:0,Q:3,H:2},MaskPattern:{PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7}}}var h=s(),u={};t.prototype={getLength:function(){return this.data.length},write:function(o){for(var t=0;t<this.data.length;t++){var e=this.data.charCodeAt(t);e>255?(o.put(e,16),o.put(e,8)):o.put(e,8)}}};e.prototype={addData:function(o){this.dataList.push(new t(o)),this.dataCache=null},isDark:function(o,t){if(o<0||this.moduleCount<=o||t<0||this.moduleCount<=t)throw new Error(o+","+t);return this.modules[o][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(o,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++){this.modules[e]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[e][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(o,t),this.typeNumber>=7&&this.setupTypeNumber(o),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(o,t){for(var e=-1;7>=e;e++)if(!(o+e<=-1||this.moduleCount<=o+e))for(var i=-1;7>=i;i++)t+i<=-1||this.moduleCount<=t+i||(this.modules[o+e][t+i]=e>=0&&6>=e&&i>=0&&6>=i&&(0==e||6==e||0==i||6==i||e>=2&&4>=e&&i>=2&&4>=i))},getBestMaskPattern:function(){for(var o=0,t=0,e=0;8>e;e++){this.makeImpl(!0,e);var i=h.Util.getLostPoint(this);(0==e||o>i)&&(o=i,t=e)}return t},setupTimingPattern:function(){for(var o=8;o<this.moduleCount-8;o++)null==this.modules[o][6]&&(this.modules[o][6]=o%2==0),null==this.modules[6][o]&&(this.modules[6][o]=o%2==0)},setupPositionAdjustPattern:function(){for(var o=h.Util.getPatternPosition(this.typeNumber),t=0;t<o.length;t++)for(var e=0;e<o.length;e++){var i=o[t],n=o[e];if(null==this.modules[i][n])for(var r=-2;2>=r;r++)for(var s=-2;2>=s;s++)this.modules[i+r][n+s]=-2==r||2==r||-2==s||2==s||0==r&&0==s}},setupTypeNumber:function(o){for(var t=h.Util.getBCHTypeNumber(this.typeNumber),e=0;e<18;e++){var i=!o&&1==(t>>e&1);this.modules[Math.floor(e/3)][e%3+this.moduleCount-8-3]=i}for(e=0;e<18;e++){i=!o&&1==(t>>e&1);this.modules[e%3+this.moduleCount-8-3][Math.floor(e/3)]=i}},setupTypeInfo:function(o,t){for(var e=h.Util.getBCHTypeInfo(this.errorCorrectLevel<<3|t),i=0;i<15;i++){var n=!o&&1==(e>>i&1);i<6?this.modules[i][8]=n:i<8?this.modules[i+1][8]=n:this.modules[this.moduleCount-15+i][8]=n}for(i=0;i<15;i++){n=!o&&1==(e>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=n:i<9?this.modules[8][15-i-1+1]=n:this.modules[8][15-i-1]=n}this.modules[this.moduleCount-8][8]=!o},mapData:function(o,t){for(var e=-1,i=this.moduleCount-1,n=7,r=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var h=0;2>h;h++)if(null==this.modules[i][s-h]){var u=!1;r<o.length&&(u=1==(o[r]>>>n&1));var a=h.Util.getMask(t,i,s-h);this.modules[i][s-h]=a?!u:u,--n,-1==n&&(r++,n=7)}if(i+=e,0>i||this.moduleCount<=i){i-=e,e=-e;break}}}},QRCode=function(o,t){this._el=o,this._htOption={width:t.width||256,height:t.height||256,typeNumber:t.typeNumber||4,colorDark:t.colorDark||"#000000",colorLight:t.colorLight||"#ffffff",correctLevel:h.ErrorCorrectLevel[t.correctLevel]||h.ErrorCorrectLevel.H},this._oQRCode=null,this._el.innerHTML="",this.makeCode(t.text)},QRCode.prototype.makeCode=function(o){this._oQRCode=new e(this._htOption.typeNumber,this._htOption.correctLevel),this._oQRCode.addData(o),this._oQRCode.make(),this.makeImage()},QRCode.prototype.makeImage=function(){var o=document.createElement("canvas");o.width=this._htOption.width,o.height=this._htOption.height;for(var t=o.getContext("2d"),e=this._oQRCode.getModuleCount(),i=this._htOption.width/e,n=this._htOption.height/e,r=0;r<e;r++)for(var s=0;s<e;s++)t.fillStyle=this._oQRCode.isDark(r,s)?this._htOption.colorDark:this._htOption.colorLight,t.fillRect(r*i,s*n,i,n);this._el.appendChild(o)};
