<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Proofy – Verifiera underlag</title>
  <meta name="description" content="Verifiera om ett underlag matchar en tidigare registrerad referens – utan att lagra filinnehåll." />
  <meta name="theme-color" content="#0b1220" />
  <link rel="stylesheet" href="/assets/proofy.css?v=2025-12-20" />
</head>

<body>
<header>
  <div class="wrap">
    <div class="nav">
      <a class="brand" href="/" aria-label="Proofy">
        <span class="logo"></span>
        <span>Proofy</span>
      </a>
      <div class="navActions">
        <a class="btn" href="/hash.html">Skapa ID</a>
        <a class="btn primary" href="/#kontakt">Boka demo</a>
      </div>
    </div>
  </div>
</header>

<main>
  <div class="wrap">
    <div class="badge">För redovisningsbyråer · revision · granskning</div>
    <h1 class="pageTitle">Verifiera underlag</h1>

    <p class="lead">
      Kontrollera om ett underlag motsvarar en tidigare registrerad referens.
      Verifiering sker utan att dokumentinnehåll lagras.
    </p>

    <section class="card content">
      <div class="grid2">

        <!-- PRIMÄRT: VERIFIERA VIA ID -->
        <section aria-label="Verifiera via Verifierings-ID">
          <b>Verifiera via Verifierings-ID</b>

          <label class="label" for="idInput">Verifierings-ID</label>
          <input id="idInput" type="text" placeholder="Klistra in Verifierings-ID (0x…)" />

          <div class="actions" style="margin-top:12px">
            <button class="btn primary" id="verifyBtn">Verifiera</button>
          </div>

          <div id="status" class="meta" style="margin-top:10px;"></div>

          <div id="resultBox" style="display:none;margin-top:12px">
            <div class="tile">

              <div id="resultTop" style="font-weight:950;"></div>

              <div class="hr"></div>

              <div class="label">Verifierings-ID</div>
              <pre class="mono" id="resultId">—</pre>
              <button class="btn soft copyBtn" data-copy="resultId">Kopiera</button>

              <div class="label" style="margin-top:12px;">Verifieringslänk</div>
              <pre class="mono" id="resultLink">—</pre>
              <button class="btn soft copyBtn" data-copy="resultLink">Kopiera</button>

              <div class="label" style="margin-top:12px;">Registreringstid</div>
              <div class="mono" id="resultTime">—</div>

            </div>
          </div>
        </section>

        <!-- SEKUNDÄRT: VERIFIERA VIA FIL -->
        <section aria-label="Verifiera via fil">
          <b>Verifiera via fil (alternativ)</b>

          <p class="meta">
            Används när Verifierings-ID saknas. Ett ID beräknas lokalt i webbläsaren.
          </p>

          <input id="fileInput" type="file" />
          <div id="dropZone" class="drop" style="margin-top:10px">Dra & släpp fil här</div>

          <div id="fileInfo" class="meta" style="margin-top:10px">Ingen fil vald.</div>

          <div class="actions" style="margin-top:12px">
            <button class="btn" id="fileVerifyBtn" disabled>Verifiera via fil</button>
          </div>

          <div id="localIdBox" style="display:none;margin-top:12px">
            <div class="label">Verifierings-ID (lokalt beräknat)</div>
            <pre class="mono" id="localIdOut">—</pre>
            <button class="btn soft copyBtn" data-copy="localIdOut">Kopiera</button>
          </div>
        </section>

      </div>
    </section>
  </div>
</main>

<script>
(() => {
  const $ = (id) => document.getElementById(id);

  document.querySelectorAll(".copyBtn").forEach(btn => {
    btn.addEventListener("click", async () => {
      const el = $(btn.dataset.copy);
      if(!el) return;
      await navigator.clipboard.writeText(el.textContent.trim());
      btn.textContent = "Kopierad";
      setTimeout(() => btn.textContent = "Kopiera", 1200);
    });
  });
})();
</script>
</body>
</html>
